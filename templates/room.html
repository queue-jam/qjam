<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Stream Aggregator</title>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
  </head>
  <body class="container">

    <h1>Audio Aggregator</h1>

    <form hx-post="/play" hx-target="#player-container" hx-swap="innerHTML">
      <label for="url">Paste YouTube URL:</label>
      <input type="text" name="url" placeholder="https://youtube.com/watch?v=..." required>
      <button type="submit">Play Stream</button>
    </form>

    <hr>

    <div id="player-container">
      <p>No audio playing.</p>
    </div>

    <h3>Current Queue</h3>
    <ul id="queue-list" 
        style="max-height: 300px; overflow-y: auto; border: 1px solid #ccc; padding: 10px;"
        hx-get="/{{ room.session_id }}/queue" 
        hx-trigger="every 2s" 
        hx-swap="innerHTML">
    </ul>

    <form hx-post="/{{ room.session_id }}/queue" hx-target="#input-wrapper" hx-swap="innerHTML">
      <label for="url">Add to Queue:</label>
      <div class="grid">
        
        <div id="input-wrapper">
           <input type="text" name="url" placeholder="https://youtube.com/..." required>
        </div>

        <button type="submit">Queue</button>
      </div>
    </form>

  </body>
</html>
